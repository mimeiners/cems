# Systems Engineering for Gyros

## Vehicles without ESP

![The moose test / elk test.](../images/lec2_moose.png)


## Vehicle Dynamics Controls Systems - ESP

![Market launch of gyros.](../images/lec2_esp.png)


## Consumer Gyroscopes

*Market segments.* 
* Mobile phones
* Digital cameras
* Pointing devices
* Gaming consoles
* GPS portables


![](../images/lec2_ipad.png)

![](../images/lec2_samsung.png)

![](../images/lec2_garmin.png)

![](../images/lec2_ixus.png)

![](../images/lec2_wii.png)



## MEMS for Automotive and Consumer Applications

* Jiri Marek, Senior Vice President, Robert Bosch, Reutlingen, Germany

{{< video "https://www.youtube.com/embed/5MKnlsLtK34"
	width="640" 
	height="365" 
	title="Plenary Sessions from the 2010 ISSCC"
>}}



## MEMS Gyroscope in Action

{{< video "../mov/lec2_mm3drive.mp4"
	width="640" 
	height="365"	
	title="Drive movement as model animation."
>}}


{{< video "../mov/lec2_mm3sense.mp4"
	width="640" 
	height="365"
	title="Sense movement as model animation."
>}}



## Spring-Mass-Damping System

* 1-D equation of motion (EoM) $F = m\ddot{x} + d\dot{x} + kx$

* Laplace transformation

$$
\begin{align}
H(s) &= \frac{1}{m s^2 +  d s + k} \\
&= \frac{\frac{1}{m}}{s^2 + \frac{\omega_0}{Q} s + \omega_0^2}
\end{align}
$$


## Functional Block Diagram

![](../images/lec2_gyroblock.png)

* Coriolis force principle, $F_C = 2 m \left(\mathbf{v} \times \Omega \right)$

* Drive loop to have an accelerated mass

* Sense loop to detect angular rate

* Distinction of closed-loop and open-loop system


## Multi-Domain Readout Block Diagram

![](../images/lec2_sdsystem.png)

$$
\begin{align}
H_s(s) &= \frac{\frac{1}{m}}{s^2 + \frac{\omega_0}{Q}s + \omega_0^2} &\quad \mbox{sensor} \\
H_{CV}(s) &= \frac{g_m}{C_L}\frac{1-e^{-sT_{int}}}{s} &\quad \mbox{CV converter} \\
H_{lf}(z) &= -\frac{z}{z+a}\frac{z^2 +b_1z +b_0}{z^2 +c_1z +c_0} &\quad \mbox{loop filter}
\end{align}
$$


## Multi-Domain Modelling

* Describing kinematic and electrical behaviour with the help of HDL
  * VHDL, VHDL-AMS
  * Verilog, Verilog-A, Verilog-AMS

* Using ROM for a MATLAB/SIMULINK model and real-time workshop to port model for use with Cadence $\rightarrow$ Verilog-AMS is used for wrapping

* Parasitic SPICE circuit equivalent from FEM sensor model and layout extraction


## ROM Modelling - Coordinate transformation

![](../images/lec2_rom.png)

$$
\begin{align}
M \ddot{x} &+ K x &= F &\quad \mbox{FEM, 100.000 DOF}\\
M \phi \ddot{q} &+ K \phi q &= F & \\
\underbrace{\phi' M \phi} \ddot{q} &+ \underbrace{\phi' K \phi} q &= \phi' F & \\
\tilde{M} \ddot{q} &+ \tilde{K} q &= \tilde{F} & \quad \mbox{ROM, approx. 10 DOF}
\end{align}
$$


## Gyro Behavioural Modelling

![Model of gyroscope.](../images/lec2_gyromodel.png)


## Mixed-domain simulation

* All models from previous slide can be used in Cadence design frame work

* Pure analog closed-loop transient simulation with Spectre (turbo, aps), circuits and verilog-a model

* Pure analog closed-loop simulation with SPICE circuit equivalent

* Mixed-domain, mixed-mode simulation with AMSDesigner (ncsim, spectre-turbo/aps)



## Analog Closed-Loop Simulation

![Analog simulation with Cadence.](../images/lec2_analogsim.png)


## AMS Closed-Loop Simulation

![AMS simulation with Cadence.](../images/lec2_amssim.png)


## Conclusion

*Vibratory Gyroscopes.* 

* Automotive and consumer applications

* System architectures

* Mixed-domain, mixed-mode analysis

* Interdisciplinarity $\rightarrow$ IC Systems Engineering  Control theory, signal theory, process technology and micromechanics


*More DOF’s.* 

* Acceleration and angular rate (6 DOF’s)

* Angulare rate and magneto sensors (6 DOF’s)

* Acceleration, angular and magneto (9 DOF’s)
